<!-- <!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta nome="autor" content="Edmilson Moreira">
    <title>Sistema CRUD</title>
</head>
<body>
    <script>
        //Criar sistema de gerenciamento de usuario.
        //uma variavel criada fora da função ou programa é chamada de global
        let arrUsers = [];
        function showMenu () {
            parseInt(prompt(`
            ****Menu*****
            [1] - Cadastrar usuário
            [2] - Listar usuário(s)
            [3] - Atualizar usuário
            [4] - Deletar usuário
            [5] - Sair do programa
            `))
        }
        //Metodo de  cadastro de usuario => (Verbo HTTP: Post)

        const addUser = () => {
            const nameUser = prompt("Informe o nome da pessoa:")

            const emailUser = prompt("Informe o e-mail da pessoa:")

            if(!nameUser  || !emailUser ) {
                alert("Os campos são obrigatorio");
            }

            arrUsers.push({nameUser, emailUser});
            console.log(arrUsers);
        }
        


        //metodo de listagem de usuários => (Verbo HTTP: GET)
        const ListUser = () => {

            let ListUser = '';

            arrUsers.forEach((dataUser) => {
            ListUser += `Nome: ${dataUser.nameUser}, Email: ${dataUser.emailUser}`
            })

            console.log(ListUser);

            alert("*****Lista de usuário*****" + ListUser);
        };

        

        // metodod de atualizar (Verbo HTTP: Put)
        function UpdateUserInfo () {
            const findEmail = prompt("Informe o e-mail que voçê deseja atualizar!")

            const usuarioEncontrado = arrUsers.find(user => user.emailUser === findEmail)
            console.log(usuarioEncontrado);
            if(usuarioEncontrado) {
                alert("usuario não foi encontrado")
                return;
            }
            const novoEmail = prompt("Informe o nome do do usuário")

            const novoNomeUsuario =  prompt("Informe o nome do do usuário")

            usuarioEncontrado.emailUser = prompt("Informe o novo E-mail")
            usuarioEncontrado.nameUser = prompt("Informe o nome do do usuário")

            novoEmail ? usuarioEncontrado.emailUser = novoEmail: null

            if(novoNomeUsuario){
                usuarioEncontrado.nameUser
            }
            let opcaouser = showMenu;
            let DeleteUser = 
            switch(){
                case 1:
                    addUser();
                    break;
                    case 2:
                        ListUser();
                        break;
                        case 3:
                            UpdateUserInfo();
                            break;
                            case 4:
                                DeleteUser();
                                break;
                                case 5:
                                    alert("Saindo do programa, até mais!");
                                    break;
                                    default;
                                    alert("Opção invalida! Tente novamente");
                                    break;
            }
        }
        
    </script>
</body>
</html> -->





<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Guilherme Amorim" />
    <title>Sistema CRUD</title>
  </head>
  <body>
    <script>
      //CRIAR SISTEMA DE GERENCIAMENTO DE USUÁRIO

      let arrUsers = [];

      function showMenu() {
        return parseInt(
          prompt(`
                *****Menu*****
                [1] - Cadastrar usuário
                [2] - Listar usuário(s)
                [3] - Atualizar usuário
                [4] - Deletar usuário
                [5] - Sair do programa
            `)
        );
      }

      //Método de cadastro de usuário => (Verbo HTTP: POST)
      const AddUser = () => {
        const nameUser = prompt("Informe o nome da pessoa:");
        const emailUser = prompt("Informe o email da pessoa:");

        if (!nameUser || !emailUser) {
          alert("Os campos são obrigatórios! ");
        }

        // E OU -> Lógicos (&&, ||, !)

        arrUsers.push({ nameUser, emailUser });

        console.log(arrUsers);
      };

      //Método de listagem de usuário => (Verbo HTTP: GET)
      const ListUser = () => {
        let listUser = "";

        arrUsers.forEach((dataUser) => {
          listUser += ` 
          Nome: ${dataUser.nameUser}, Email: ${dataUser.emailUser}`;
        });

        console.log(listUser);

        alert("*****Lista de usuários*****" + listUser);
      };

      //Método de Atualizar => (Verbo HTTP: PUT)
      function UpdateUserInfo() {
        const findEmail = prompt("Informe o email que você deseja atualizar!");
        const usuarioEncontrado = arrUsers.find(
          (user) => user.emailUser === findEmail
        );

        if (!usuarioEncontrado) {
          alert("Usuário não foi encontrado!");

          return;
        }

        
        const novoEmail = prompt("Informe o novo email: ");
        const novoNomeUsuario = prompt("Informe o nome do usuário: ");

        //  condicao      retorno se verdadeiro
        novoEmail ? (usuarioEncontrado.emailUser = novoEmail) : null;

        if (novoNomeUsuario) {
          usuarioEncontrado.nameUser = novoNomeUsuario;
        }

        alert("Usuário foi atualizado com sucesso!");
      }
        //Método de Deletar => (Verbo HTTP: DELETE)
      function DeleteUser() {
        const emailDelete = prompt("Informe o E-mail do usuário que deseja deletar")
        const  indiceDelete = arrUsers.findIndex(email => email.emailUser === emailDelete)
        //const emaildeleteVerification = arrUsers.find(email => email.emailUser === emaildelete)

        const confirmacao = window.confirm(`Voçê deseja excluir o usuario? ${emailDelete}`)

        if (confirmacao) {
            arrUsers.splice(indiceDelete, 1);
          } 
        
          alert("O usuário foi deletado com sucesso!");
        }
      

      let opcaouser = true;
      while(opcaouser){

      switch (showMenu()) {
        case 1:
          AddUser();
          break;
        case 2:
          ListUser();
          break;
        case 3:
          UpdateUserInfo();
          break;
        case 4:
          DeleteUser();
          break;
        case 5:
          alert("Saindo do programa, até mais!")
        opcaouser = false;
          break;
        default:
          alert("Opção inválida! Tente novamente")
          break;
      }}
      
    </script>
  </body>
  </html>